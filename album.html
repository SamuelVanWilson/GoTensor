<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWEET SEVENTEEN EVII</title>
    <link rel="stylesheet" href="asset/css/album.css">
</head>
<body>
  <div id="instruction-popup">
    <div class="popup-content">
      <h2>ðŸ“Œ HARAP DIBACA</h2>
      <img src="gif/tutorial.gif" alt="Gif Tutorial" id="gif">
      <p>
        ini adalah album foto kenangan bareng muel dan evi. kalau pengen liat fotonya(btw bisa di zoom albumnya), cukup geser bagian pojok kanan atas atau bawah bukunya kekiriðŸŽ‰
      </p>
      <button id="close-popup">Tutup</button>
    </div>
  </div>
  
  <div id="loader">
    <div class="spinner"></div>
  </div>
  
<div class="book-wrapper hidden-content">
    <div class="book-container">
      <div class="book" id="book">
        <div class="page"><img src="img/page1.webp" alt=""/></div>
        <div class="page"><img src="img/page2.webp" alt=""/></div>
        <div class="page"><img src="img/page3.webp" alt=""/></div>
        <div class="page"><img src="img/page4.webp" alt=""/></div>
        <div class="page"><img src="img/page5.webp" alt=""/></div>
        <div class="page"><img src="img/page6.webp" alt=""/></div>
        <div class="page"><img src="img/page7.webp" alt=""/></div>
        <div class="page"><img src="img/page8.webp" alt=""/></div>
      </div>
    </div>
</div>
<a href="page2.html" class="btn-back" onclick="delayedRedirect(event)">
  <img src="img/back.png" alt="Back" class="icon-back">
  Kembali
</a>
<audio id="clickSound" src="asset/click.mp3" preload="auto"></audio>
<audio id="song" src="asset/song_album.mp3" preload="auto"></audio>
<script>

  const sound = document.getElementById("clickSound");
  const song = document.getElementById("song");
  const btn = document.querySelector(".btn-back");
  window.addEventListener('load', function () {
    const loader = document.getElementById('loader');
    const mainContent = document.querySelector('.book-wrapper');
    const popup = document.getElementById('instruction-popup');
    const closeBtn = document.getElementById('close-popup');

    // if (!localStorage.getItem('popupShown')) {
      popup.style.display = 'flex';
    // }

    closeBtn.addEventListener('click', () => {
      popup.style.display = 'none';
      song.play();
      // localStorage.setItem('popupShown', 'true');
    });
    loader.style.opacity = '0';
    loader.style.pointerEvents = 'none';
    setTimeout(() => {
      loader.style.display = 'none';
      mainContent.classList.add('hidden-content');
      mainContent.classList.add('show-content');
    }, 500); // biar fade out dulu
  });

  btn.addEventListener("click", () => sound.play())
  if (localStorage.getItem("pageCheck")) {
    if (localStorage.getItem("pageCheck") != 190408){window.history.back()}
  }else {window.history.back()}

  function delayedRedirect(event) {
    event.preventDefault(); // biar gak langsung pindah

    const targetUrl = event.currentTarget.getAttribute('href');

    setTimeout(() => {
      window.location.href = targetUrl;
    }, 800); // jeda 2 detik
  }

  setInterval(() => {
    const gif = document.getElementById('gif');
    const src = gif.src;
    gif.src = '';       // kosongin dulu
    gif.src = src;      // balikin lagi biar mulai dari awal
  }, 2300);
</script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="asset/js/animation.js"></script>
</body>
</html>